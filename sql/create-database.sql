--<ScriptOptions statementTerminator=";"/>

ALTER TABLE PCM_AUTHORITIES DROP CONSTRAINT FK_OBC7IM9QO6CRSYVXU1QJ6C5SN;

ALTER TABLE PCM_USERS DROP CONSTRAINT SQL120217135903340;

ALTER TABLE PCM_CONTACT_EMAILS DROP CONSTRAINT SQL120217135905850;

ALTER TABLE PCM_GROUP DROP CONSTRAINT SQL120217135902050;

ALTER TABLE PCM_GROUP_MEMBERS DROP CONSTRAINT SQL120217135909430;

ALTER TABLE PCM_CONTACTS DROP CONSTRAINT SQL120217135904620;

ALTER TABLE PCM_AUTHORITIES DROP CONSTRAINT SQL120217135907090;

DROP INDEX SQL120217135907090;

DROP INDEX SQL120217135903341;

DROP INDEX UK_CB3Q9G36R3NKK0EBXUHKDYU9U;

DROP INDEX SQL170518232030120;

DROP INDEX SQL120217135909430;

DROP INDEX SQL170519165857070;

DROP INDEX SQL120217135904620;

DROP INDEX SQL120217135905850;

DROP INDEX SQL120217135902050;

DROP TABLE PCM_GROUP_AUTHORITIES;

DROP TABLE PCM_CONTACTS;

DROP TABLE PCM_GROUP_MEMBERS;

DROP TABLE PCM_AUTHORITIES;

DROP TABLE PCM_USERS;

DROP TABLE PCM_GROUP;

DROP TABLE PCM_CONTACT_EMAILS;

CREATE TABLE PCM_GROUP_AUTHORITIES (
		GROUP_ID INTEGER NOT NULL,
		AUTHORITY VARCHAR(30) NOT NULL
	);

CREATE TABLE PCM_CONTACTS (
		CONTACT_ID INTEGER DEFAULT GENERATED_BY_DEFAULT NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 128),
		FIRSTNAME VARCHAR(100) NOT NULL,
		LASTNAME VARCHAR(100) NOT NULL,
		TITLE VARCHAR(100),
		COMPANY VARCHAR(100),
		NAME VARCHAR(255)
	);

CREATE TABLE PCM_GROUP_MEMBERS (
		ID INTEGER DEFAULT GENERATED_BY_DEFAULT NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 48),
		GROUP_ID INTEGER NOT NULL,
		CONTACT_ID INTEGER NOT NULL
	);

CREATE TABLE PCM_AUTHORITIES (
		USERNAME VARCHAR(100) NOT NULL,
		AUTHORITY VARCHAR(30) NOT NULL,
		USER_ID INTEGER
	);

CREATE TABLE PCM_USERS (
		ID INTEGER DEFAULT AUTOINCREMENT: start 1 increment 4 NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 5),
		LOGIN VARCHAR(100) NOT NULL,
		USERNAME VARCHAR(100) NOT NULL,
		FIRSTNAME VARCHAR(100) NOT NULL,
		LASTNAME VARCHAR(100) NOT NULL,
		PASSWORD VARCHAR(100) NOT NULL,
		ENABLED INTEGER DEFAULT 1 NOT NULL,
		PUBLIC_SECRET VARCHAR(100),
		PRIVATE_SECRET VARCHAR(100),
		PROFILE INTEGER
	);

CREATE TABLE PCM_GROUP (
		GROUP_ID INTEGER DEFAULT GENERATED_BY_DEFAULT NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 5),
		GROUP_NAME VARCHAR(30) NOT NULL,
		GROUP_DESCRIPTION VARCHAR(200)
	);

CREATE TABLE PCM_CONTACT_EMAILS (
		ID INTEGER DEFAULT GENERATED_BY_DEFAULT NOT NULL GENERATED ALWAYS AS IDENTITY  (START WITH 1 ,INCREMENT BY 14),
		CONTACT_ID INTEGER NOT NULL,
		EMAIL VARCHAR(100),
		EMAILKIND INTEGER DEFAULT 1 NOT NULL
	);

CREATE UNIQUE INDEX SQL120217135907090 ON PCM_AUTHORITIES (USERNAME ASC);

CREATE UNIQUE INDEX SQL120217135903341 ON PCM_USERS (USERNAME ASC);

CREATE UNIQUE INDEX UK_CB3Q9G36R3NKK0EBXUHKDYU9U ON PCM_AUTHORITIES (AUTHORITY ASC, USERNAME ASC);

CREATE UNIQUE INDEX SQL170518232030120 ON PCM_USERS (ID ASC);

CREATE UNIQUE INDEX SQL120217135909430 ON PCM_GROUP_MEMBERS (ID ASC);

CREATE INDEX SQL170519165857070 ON PCM_AUTHORITIES (USER_ID ASC);

CREATE UNIQUE INDEX SQL120217135904620 ON PCM_CONTACTS (CONTACT_ID ASC);

CREATE UNIQUE INDEX SQL120217135905850 ON PCM_CONTACT_EMAILS (ID ASC);

CREATE UNIQUE INDEX SQL120217135902050 ON PCM_GROUP (GROUP_ID ASC);

ALTER TABLE PCM_USERS ADD CONSTRAINT SQL120217135903340 PRIMARY KEY (ID);

ALTER TABLE PCM_CONTACT_EMAILS ADD CONSTRAINT SQL120217135905850 PRIMARY KEY (ID);

ALTER TABLE PCM_GROUP ADD CONSTRAINT SQL120217135902050 PRIMARY KEY (GROUP_ID);

ALTER TABLE PCM_GROUP_MEMBERS ADD CONSTRAINT SQL120217135909430 PRIMARY KEY (ID);

ALTER TABLE PCM_CONTACTS ADD CONSTRAINT SQL120217135904620 PRIMARY KEY (CONTACT_ID);

ALTER TABLE PCM_AUTHORITIES ADD CONSTRAINT SQL120217135907090 PRIMARY KEY (USERNAME);

ALTER TABLE PCM_AUTHORITIES ADD CONSTRAINT FK_OBC7IM9QO6CRSYVXU1QJ6C5SN FOREIGN KEY (USER_ID)
	REFERENCES PCM_USERS (ID);

